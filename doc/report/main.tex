\documentclass[12pt,a4paper,twoside,openright]{report}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% PACKAGES %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[swedish]{babel}
\usepackage[utf8]{inputenc}
\usepackage[hidelinks]{hyperref}
\usepackage{
  amsmath,
  amssymb,
  caption,
  color,
  csquotes,
  float,
  graphicx,
  listings,
  parskip,
  pdflscape,
  scrextend,
  siunitx,
  tikz,
  titlesec,
  parskip,
  xspace,
  xstring,
  subcaption,
}
\usepackage[
% disable % Comment out to disable all macros defined for this package (so you don't have to manually remove all todos from the entire report)
]{todonotes} % remove later
\usepackage[
    backend=biber,
    style=ieee,
    citestyle=numeric-comp,
    sorting=none
]{biblatex}
\addbibresource{refs.bib}
\usetikzlibrary{positioning}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LISTINGS SETTINGS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\definecolor{mygreen}{rgb}{0,0.4,0.1}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}

\lstset{
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
  basicstyle=\ttfamily\footnotesize,            % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygreen},    % comment style
  deletekeywords={},               % if you want to delete keywords from the given language
  escapeinside={\%*}{*\)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  firstnumber=1,                   % start line enumeration with line 1000
  frame=single,                    % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{blue},       % keyword style
  language=c,                      % the language of the code
  morekeywords={*,},               % if you want to add more keywords to the set
  numbers=none,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{mymauve},     % string literal style
  tabsize=2,                       % sets default tabsize to 2 spaces
  title=\lstname{},                % show the filename of files included with \lstinputlisting; also try caption instead of title
  belowskip=-\baselineskip         % HACK! Do not add whitespace after enviroment so that wrapping in figure doesn't produce a whole ton of vertical space.
}

% FIX LISTINGS ENCODING PROBLEM
\lstset{literate=
  {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'\i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
  {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
  {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`\i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
  {À}{{\`A}}1 {È}{{\`E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
  {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"\i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
  {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
  {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^\i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
  {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
  {ã}{{\~a}}1 {ẽ}{{\~e}}1 {ĩ}{{\~\i}}1 {õ}{{\~o}}1 {ũ}{{\~u}}1
  {Ã}{{\~A}}1 {Ẽ}{{\~E}}1 {Ĩ}{{\~I}}1 {Õ}{{\~O}}1 {Ũ}{{\~U}}1
  {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
  {ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1
  {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
  {€}{{\euro}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
  {»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1 {¡}{{!`}}1
}

\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{white},
    literate=
     *{0}{{{\color{teal}0}}}{1}
      {1}{{{\color{teal}1}}}{1}
      {2}{{{\color{teal}2}}}{1}
      {3}{{{\color{teal}3}}}{1}
      {4}{{{\color{teal}4}}}{1}
      {5}{{{\color{teal}5}}}{1}
      {6}{{{\color{teal}6}}}{1}
      {7}{{{\color{teal}7}}}{1}
      {8}{{{\color{teal}8}}}{1}
      {9}{{{\color{teal}9}}}{1}
      {:}{{{\color{violet}{:}}}}{1}
      {,}{{{\color{violet}{,}}}}{1}
      {\{}{{{\color{brown}{\{}}}}{1}
      {\}}{{{\color{brown}{\}}}}}{1}
      {[}{{{\color{brown}{[}}}}{1}
      {]}{{{\color{brown}{]}}}}{1},
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  NICE PALETTE  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% https://images.squarespace-cdn.com/content/v1/638773c92dfb4812d5f5ff28/1669823793535-UWL204TLLHME6SFDP2QZ/image-asset.png
\definecolor{navy}{RGB}{16,37,38}
\definecolor{ginger}{RGB}{205,126,89}
\definecolor{seafoam}{RGB}{69,115,115}
\definecolor{sunflower}{RGB}{221,178,71}
\definecolor{jean}{RGB}{90,104,104}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% HACKS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Change \chapter format
\titleformat{\chapter} % command
    [display] % shape
  {\normalfont\huge\bfseries} % format
  {} % label
  {0pt} % sep
  {\Huge\thechapter\quad} % before-code
  [] % after code
\titleformat{name=\chapter,numberless} % command
    [display] % shape
  {\normalfont\huge\bfseries} % format
  {} % label
  {0pt} % sep
  {\Huge} % bfore-code
  [] % after-code
\titlespacing*{\chapter}
    {0pt}  % left
    {-1cm} % before
    {0pt}  % after

% prevent words running into the margins
% \emergencystretch 3em

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% THE fontspace ENVIRONMENT %%%%%%%%%%%%%%%%%%%%%%%
% https://tex.stackexchange.com/a/284775
% Use like \begin{fontspace}{1.5}{2} ... \end{fontspace}
% Changes word spacing according to arguments
% TODO: figure out what the two arguments exactly do, so far used it blindly.

% declare new dimensions
\newdimen\origiwspc{}
\newdimen\origiwstr{}

\newenvironment{fontspace}[2]
    {\par
        % set default value of new dimensions
        \origiwspc=\fontdimen2\font% original inter word space
        \origiwstr=\fontdimen3\font% original inter word stretch
        % set dimensions to arguments given
        \fontdimen2\font=#1\origiwspc{}
        \fontdimen3\font=#2\origiwstr{}
    }
    {\par
        % reset original dimensions
        \fontdimen2\font=\origiwspc{}
        \fontdimen3\font=\origiwstr{}
    }


% Prevent Latex from being mean to Albin
\hyphenation{Albin}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% COMMANDS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\stoe}{S$^2$E\xspace}

\newcommand{\ambaTitle}{AMBA:\@ Interaktiv visualisering av symbolisk fuzzing}
\newcommand{\ambaAuthors}{Loke Gustafsson, Samuel Kyletoft, Enayatullah Norozi, Albin Otterhäll, Clara Salberg, Linus Wallman}
\newcommand{\ambaCityCountryYear}{Gothenburg, Sweden \the\year}
\newcommand{\ambaCityCountryYearSwedish}{Göteborg, Sverige \the\year}
\newcommand{\ambaDepartment}{Department of Computer Science and Engineering}
\newcommand{\ambaDepartmentSwedish}{Institutionen för Data och Informationsteknik}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%% DOCUMENT STRUCTURE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\year=2023
\pagenumbering{gobble} % turn off page numbers

\input{cover_svenska.tex}
\newpage\null{} % empty page after cover to present better for printing on both faces of paper
\newpage
\input{titlepage_svenska.tex}

\newpage
\pagenumbering{roman} % turn on roman page numbers
\setcounter{page}{3}

\chapter*{Abstract}
\input{abstract.tex}

\chapter*{Sammandrag}
\input{abstract_svenska.tex}
\newpage

\tableofcontents
\newpage

\addcontentsline{toc}{section}{Begreppslista}
\chapter*{Begreppslista}
\input{begreppslista.tex}

\newpage

\pagenumbering{arabic} % turn on arabic page numbers

\chapter{Inledning}\label{chap:inledning}
\input{inledning/main.tex}
% \section{Tidigare arbete}
% \input{inledning/tidigarearbete.tex}
% \section{Avgränsningar}
% \input{inledning/avgransningar.tex}
\section{Syfte}\label{sec:syfte}
\input{inledning/syfte.tex}
\section{Rapportstruktur}
\input{inledning/rapportstruktur.tex}

\chapter{Teori}\label{chap:teori}
\input{teori/main.tex}
\section{Symbolisk exekvering}\label{sec:symbolic_execution}
\input{teori/symbolisk_exekvering.tex}
\section{Fuzzing}
\input{teori/fuzzing.tex}
\section{Exekveringsmotor}
\input{teori/arkitektur_for_binaranalysverktyg.tex}

\chapter{Existerande verktyg}\label{chap:existerande_verktyg}
\input{existerande_verktyg/main.tex}
\section{Statisk disassemblering}\label{sec:existerande-disasm}
\input{existerande_verktyg/statisk_disassemblering.tex}
\section{Dynamiska binäranalysramverk för symbolisk exekvering}\label{sec:existerande-ramverk}
\input{existerande_verktyg/dynamiska_binaranalysramverk.tex}
\section{Automatiska fuzzers}\label{sec:existerande-automatisk}
\input{existerande_verktyg/automatiska_fuzzers.tex}
\section{Visualiserad symbolisk fuzzing}\label{sec:existerande-visualiserad}
\input{existerande_verktyg/visualiserad.tex}

\chapter{AMBA}\label{chap:amba}
\input{amba/main.tex}

\chapter{Implementation}\label{chap:implementation}
\input{implementation/main.tex}

\chapter{Evaluering}\label{chap:evaluering}
\input{evaluering/main.tex}
\section{Jämförelse mellan AMBA och Ghidra}\label{sec:amba-vs-ghidra}
\input{evaluering/amba-vs-ghidra.tex}
\section{Jämförelse mellan \stoe{} och Angr som \\ backend}\label{sec:amba-vs-ghidra}
\input{evaluering/amba-vs-angr.tex}
\section{Jämförelse mellan AMBA och SymNav}\label{sec:amba-vs-symnav}
\input{evaluering/amba-vs-symnav.tex}
\section{Arbetsprocess}\label{sec:arbetsprocess}
\input{evaluering/arbetsprocess.tex}
\section{Vidareutveckling}\label{sec:vidareutveckling}
\input{evaluering/vidareutveckling.tex}

\chapter{Slutsats}\label{chap:slutsats}
\input{slutsats/main.tex}

\printbibliography{}

\end{document}
